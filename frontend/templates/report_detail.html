{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>{{ report.title or 'Отчет' }}</h2>
        <div>
            <a href="{{ url_for('reports_page') }}" class="btn btn-outline-secondary">Назад к списку</a>
            {% if user.role in ['manager', 'admin'] %}
            <a href="{{ url_for('edit_report', report_id=report.id) }}" class="btn btn-warning">Редактировать</a>
            {% endif %}
        </div>
    </div>

    {% if report %}
    <div class="card">
        <div class="card-header">
            <div class="row">
                <div class="col-md-6">
                    <strong>Тип отчета:</strong> 
                    <span class="badge 
                        {% if report.report_type == 'progress' %}bg-primary
                        {% elif report.report_type == 'financial' %}bg-success
                        {% elif report.report_type == 'statistics' %}bg-info
                        {% elif report.report_type == 'technical' %}bg-warning
                        {% else %}bg-secondary{% endif %}">
                        {{ report.report_type }}
                    </span>
                </div>
                <div class="col-md-6 text-end">
                    <strong>Создан:</strong> {{ report.created_at }}
                </div>
            </div>
        </div>
        <div class="card-body">
            <h5 class="card-title">Содержание</h5>
            <div class="report-content" style="white-space: pre-line; font-family: monospace;">
                {{ report.content }}
            </div>
        </div>
        <div class="card-footer text-muted">
            <small>Автор: {{ report.created_by }}</small>
        </div>
    </div>
    {% else %}
    <div class="alert alert-warning">
        <h5>Отчет не найден</h5>
        <p>Запрошенный отчет не существует или был удален.</p>
        <a href="{{ url_for('reports_page') }}" class="btn btn-primary">Вернуться к списку отчетов</a>
    </div>
    {% endif %}
</div>
{% endblock %}